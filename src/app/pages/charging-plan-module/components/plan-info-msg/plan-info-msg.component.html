<nz-tabset [nzType]="'card'" [nzSelectedIndex]="index" [nzTabBarExtraContent]="extraTemplate">
    <nz-tab *ngFor="let tab of tabsList;index as tabIndex" [nzTitle]="titleTemplate">
        <ng-template #titleTemplate>
            <div>{{ tab.titleName }}
            </div>
        </ng-template>
        <div class="mainBox">
            <div *ngFor="let form of tab.dataForm.controls;index as formNum">
                <form nz-form [formGroup]="form" class="ant-advanced-search-form">
                    <div class="banner2">
                        <nz-card nzType="inner" nzTitle="环节基本信息">
                            <div nz-row [nzGutter]="24">
                                <div nz-col [nzSpan]="7">
                                    <nz-form-item nzFlex>
                                        <nz-form-label [nzSpan]="10">生产日期</nz-form-label>
                                        <nz-form-control [nzSpan]="14">
                                            <div>{{form.value.startTime | date:'yyyy-MM-dd'}}</div>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-item nzFlex>
                                        <nz-form-label [nzSpan]="8">使用设备</nz-form-label>
                                        <nz-form-control [nzSpan]="16">
                                            <div>{{form.value.deviceName}}</div>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-item nzFlex>
                                        <nz-form-label [nzSpan]="8">选择工艺</nz-form-label>
                                        <nz-form-control [nzSpan]="16">
                                            <div>{{form.value.craftName || '未选择工艺'}}</div>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                                <div nz-col [nzSpan]="5">
                                    <nz-form-item nzFlex>
                                        <nz-form-label [nzSpan]="8">调度员</nz-form-label>
                                        <nz-form-control [nzSpan]="16">
                                            <div>{{planOtherInfo.planner.name}}</div>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>
                            <div nz-row [nzGutter]="24">
                                <div nz-col [nzSpan]="7">
                                    <nz-form-item nzFlex>
                                        <nz-form-label [nzSpan]="10">预计结束时间</nz-form-label>
                                        <nz-form-control [nzSpan]="14">
                                            <div>{{form.value.endTime | date:'yyyy-MM-dd'}}</div>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-item nzFlex>
                                        <nz-form-label [nzSpan]="8">作业区域</nz-form-label>
                                        <nz-form-control [nzSpan]="16">
                                            <div>{{form.value.areaName}}</div>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-item nzFlex>
                                        <nz-form-label [nzSpan]="8">工艺编号</nz-form-label>
                                        <nz-form-control [nzSpan]="16">
                                            <div>{{form.value.craftNo||'未选择工艺'}}</div>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                                <div nz-col [nzSpan]="5">
                                    <nz-form-item nzFlex>
                                        <nz-form-label [nzSpan]="8">技术员</nz-form-label>
                                        <nz-form-control [nzSpan]="16">
                                            <div>{{planOtherInfo.technician?planOtherInfo.technician.name:'技术员姓名'}}</div>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>
                            <div nz-row [nzGutter]="24">
                                <div nz-col [nzSpan]="18">
                                    <nz-form-item nzFlex>
                                        <nz-form-label [nzSpan]="2">备注</nz-form-label>
                                        <nz-form-control [nzSpan]="20">
                                            <div>{{form.value.remark}}</div>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-item nzFlex>
                                        <nz-form-label>当前状态</nz-form-label>
                                        <nz-form-control>
                                            <nz-badge
                                                [nzColor]="{'TO_BE_ADDED':'red','TO_BE_EXECUTED':'orange','EXECUTING':'blue','COMPLETED':'green', 'PLAN_UPDATE':'red'}[planOtherInfo.status]"
                                                [nzText]="{'TO_BE_ADDED':'待补充','TO_BE_EXECUTED':'待执行','EXECUTING':'执行中','COMPLETED':'完成', 'PLAN_UPDATE':'计划变更'}[planOtherInfo.status]">
                                            </nz-badge>
                                        </nz-form-control>
                                    </nz-form-item>
                                </div>
                            </div>
                            <div nz-row>
                            </div>

                        </nz-card>
                    </div>
                </form>
                <div class="banner3 m-t-20">
                    <div>
                        <nz-table #basicTable [nzData]="[{A:1,B:2}]" nzBordered [nzFrontPagination]="false"
                            [nzShowPagination]="false">
                            <thead>
                                <tr>
                                    <th nzWidth="70px">序号</th>
                                    <th>货号</th>
                                    <th>生产号</th>
                                    <th>材质</th>
                                    <th>材质代码</th>
                                    <th>尺寸(mm)</th>
                                    <th>数量(支)</th>
                                    <th>单净重(t)</th>
                                    <th>总净重(t)</th>
                                    <th nzWidth="80px">操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let data of tab.rollsList[formNum].list;let i = index">
                                    <td><button style="background-color: #253559;border-color: #253559;" nz-button
                                            nzType="primary" nzShape="circle">{{i+1}}</button></td>
                                    <td>{{data.freight.freightNumber}}</td>
                                    <td>
                                        <span *ngFor="let item of data.numChoose">{{item}}　</span>
                                    </td>
                                    <td>{{data.freight.material}}</td>
                                    <td>{{data.freight.materialCode}}</td>
                                    <td>
                                        <div [class]="data.freight.isBig?'fontRed':''">{{data.freight.size}}</div>
                                    </td>
                                    <td>{{data.numChoose.length}}</td>
                                    <td>
                                        {{data.freight.netWeight | number:"0.1-2"}}
                                    </td>
                                    <td>
                                        {{myNumber(data.freight.netWeight) * data.numChoose.length | number:"0.1-2"}}
                                    </td>
                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </div>
                    <div class="m-t-10 m-b-20">
                    </div>
                </div>
            </div>
        </div>
    </nz-tab>
</nz-tabset>
<ng-template #extraTemplate>
    <button nz-button (click)="goBack()">返回上一页</button>
</ng-template>